<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- saved from url=(0052)http://de.selfhtml.org/servercgi/server/htaccess.htm -->
<html data-ember-extension="1"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">

<title>SELFHTML: Webserver/CGI / Webserver / .htaccess - Server-Reaktionen kontrollieren</title>
<link rel="stylesheet" type="text/css" href="./SeHt01_files/selfhtml.css">
<meta name="description" content="Welche Möglichkeiten die Verwendung der Datei .htaccess bietet - z.B. Passwortschutz, individuelle Verzeichnislistings oder alternative Inhalte">
<meta name="keywords" content="SELFHTML, .htaccess, Verzeichnis-Optionen, Passwortschutz, alternative Inhalte, dircetory browsing, Verzeichnislistings">
<meta name="author" content="Redaktion SELFHTML, selfhtml81@selfhtml.org">
<meta name="DC.Publisher" content="SELFHTML e. V.">
<meta name="DC.Date" content="2005-11-16T00:59:03+01:00">
<meta name="DC.Identifier" content="http://de.selfhtml.org/servercgi/server/htaccess.htm">
<meta name="DC.Language" content="de">
<meta name="DC.Rights" content="../editorial/copyright.htm">
<meta name="DC.Date.created" content="2001-10-27T08:00+01:00">
<meta name="SELF.Pagetype" content="page">
<link rel="alternate" type="application/atom+xml" title="SELFHTML-Weblog (Atom, gesamt)" href="http://aktuell.de.selfhtml.org/weblog/atom-feed">
<link rel="alternate" type="application/rss+xml" title="SELFHTML-Weblog (RSS, Auszüge)" href="http://aktuell.de.selfhtml.org/weblog/rss-feed">
<link rel="shortcut icon" type="image/x-icon" href="http://de.selfhtml.org/src/favicon.ico">
<link rel="author" title="Impressum" href="http://de.selfhtml.org/editorial/impressum.htm">
<link rel="contents" title="Inhaltsverzeichnis" href="http://de.selfhtml.org/navigation/inhalt.htm">
<link rel="index" title="Stichwortverzeichnis" href="http://de.selfhtml.org/navigation/stichwort.htm">
<link rel="search" title="Suche" href="http://de.selfhtml.org/navigation/suche/index.htm">
<link rel="help" title="Hilfe" href="http://de.selfhtml.org/editorial/index.htm">
<link rel="copyright" title="Urheberrecht" href="http://de.selfhtml.org/editorial/copyright.htm">
<link rel="top" title="SELFHTML" href="http://de.selfhtml.org/index.htm">
<link rel="up" title="Webserver" href="http://de.selfhtml.org/servercgi/server/index.htm">
<link rel="next" title="Umleitungen mit mod_rewrite" href="http://de.selfhtml.org/servercgi/server/rewrite.htm">
<link rel="prev" title="SSI - Server Side Includes" href="http://de.selfhtml.org/servercgi/server/ssi.htm">
<link rel="first" title="Webserver lokal auf einem PC einrichten" href="http://de.selfhtml.org/servercgi/server/allgemein.htm">
<link rel="last" title="HTTP-Status-Codes" href="http://de.selfhtml.org/servercgi/server/httpstatuscodes.htm">
</head>
<body data-ember-extension="1">

<table cellpadding="4" cellspacing="0" border="0" width="100%">
<tbody><tr>
<td colspan="2" class="nav"><a class="an" name="top"><img src="./SeHt01_files/refkap.gif" width="16" height="13" alt="Teil von"></a> <a href="http://de.selfhtml.org/index.htm">SELFHTML</a>/<a href="http://de.selfhtml.org/navigation/index.htm" target="_parent" class="navh">Navigationshilfen</a> <img src="./SeHt01_files/refkap.gif" width="16" height="13" alt="Teil von">&nbsp;<a href="http://de.selfhtml.org/servercgi/index.htm">Webserver/CGI</a> <img src="./SeHt01_files/refkap.gif" width="16" height="13" alt="Teil von">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/index.htm">Webserver</a></td>
</tr>
<tr>
<td class="doc" width="110"><a href="http://de.selfhtml.org/servercgi/index.htm"><img src="./SeHt01_files/logo.gif" width="106" height="109" border="0" alt="SELFHTML"></a></td>
<td class="docbot" width="100%"><h1 class="ph1">.htaccess - Server-Reaktionen kontrollieren</h1></td>
</tr>
<tr>
<td class="doctop">
<img src="./SeHt01_files/dokx.gif" width="30" height="20" vspace="6" alt="Informationsseite">
</td>
<td valign="top" nowrap="nowrap">
<p>
<img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#allgemeines">Allgemeines zu .htaccess-Dateien</a><br>
<img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#erlaubte_anweisungen">Erlaubte Anweisungen in .htaccess-Dateien</a><br>
<img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#verzeichnisschutz">Verzeichnisse und Dateien mit Passwort schützen</a><br>
<img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#ip_bereiche_namen">IP-Adressen, IP-Bereiche oder Namensadressen zulassen/ausschließen</a><br>
<img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#optionen">Verzeichnis-Optionen einstellen</a><br>
<img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#fehlermeldungen">Individuelle Fehlermeldungen gestalten</a><br>
<img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#browsing">Verzeichnis-Browsing einstellen</a><br>
<img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#alternative_inhalte">Alternative Inhalte senden</a><br>
</p>
</td>
</tr><tr><td colspan="2" class="doc">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#bottom"><img src="./SeHt01_files/down.gif" width="14" height="10" border="0" alt="nach unten"></a>&nbsp;</td></tr>
</tbody></table>



<h2><a class="an" name="allgemeines">Allgemeines zu .htaccess-Dateien</a></h2>

<p>Webserver, die zum NCSA-Server kompatibel sind, kennen das Konzept der <var>.htaccess</var>-Dateien. Heute trifft das vor allem auf den immer dominanter werdenden und die Defacto-Standards im Web setzenden Webserver <b>Apache</b> zu. Wenn auf Ihrem Server-Rechner also ein <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a target="_top" href="http://de.selfhtml.org/servercgi/server/apache.htm">Apache Webserver</a> läuft, dann können Sie die Technik der <var>.htaccess</var>-Dateien einsetzen. Aber auch für andere Webserver gibt es vergleichbare Konzepte, um beispielsweise einen Zugriffsschutz zu realisieren. Falls Sie nicht wissen, welche Webserver-Software auf dem Rechner läuft, auf dem Sie Ihr Web-Projekt hosten, fragen Sie bitte Ihren Provider oder Webmaster. <!-- dann können Sie im Online-Angebot von SELFHTML aktuell den <img src="../../src/serverdok.gif" width="15" height="10" alt="Online-Seite">&nbsp;<a target="_top" href="http://aktuell.de.selfhtml.org/sonst/serverid.htm">SELFHTML Server Watch</a> benutzen, um es herauszufinden. Fragen Sie ansonsten im Zweifelsfall Ihren Provider oder Webmaster! --></p>

<p><var>.htaccess</var>-Dateien sind Server-Konfigurationsdateien für Verzeichnisse, die zu Ihrem Web-Angebot gehören. So ist die <var>.htaccess</var>-Technik beispielsweise der übliche Weg, um nur bestimmten Benutzern den Zugriff auf bestimmte Daten zu erlauben. <var>.htaccess</var> ist also die Antwort auf die immer wieder gestellte Frage nach einem "richtigen" Passwortschutz. Doch mit <var>.htaccess</var>-Dateien können Sie noch viel mehr anstellen als Daten mit Passwörtern zu schützen. So können Sie auch ganze Benutzerkreise automatisch (ohne Passwortzugang) aussperren oder alle bis auf bestimmte <img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#ip_bereiche_namen">aussperren</a>. Sie können Optionen zum so genannten <img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#browsing">Verzeichnis-Browsing</a> (Web-Browser ruft ein Verzeichnis auf, in dem keine Default-Datei wie z.B. <var>index.htm</var> liegt) einstellen. Sie können automatische <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/rewrite.htm">Weiterleitungen</a> einstellen oder eigene Regelungen für den Fall von <img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#fehlermeldungen">HTTP-Fehlermeldungen</a> schaffen. Sie können sogar abhängig von bestimmten Bedingungen <img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#alternative_inhalte">alternative Inhalte anbieten</a>, beispielsweise Webseiten mit unterschiedlichen Landessprachen abhängig von der Sprache des benutzten Web-Browsers - ohne CGI, ohne JavaScript. Und schließlich können Sie sogar einstellen, ob Daten komprimiert an den aufrufenden Browser übertragen werden können oder ob bei Aufrufen einzelner zu Ihrem Projekt gehörender Adressen auf eine andere URL <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a target="_top" href="http://de.selfhtml.org/servercgi/server/rewrite.htm">umgeleitet</a> werden soll.</p>

<p>Dateien mit dem Namen <var>.htaccess</var> (das erste Zeichen ist ein Punkt) sind Bestandteile der Konfiguration des Webservers. Die Arbeitsweise des Webservers wird mit Hilfe einer (oder mehrerer) zentraler Konfigurationsdatei(en) definiert - die <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/apache.htm#konfiguration">httpd.conf</a>. Doch diese liegt bzw. liegen normalerweise innerhalb des Programmverzeichnisses des Webservers selbst, worauf Benutzer, die ein Web-Projekt verwalten, in aller Regel keinen Zugriff erhalten. Der Server-Administrator legt in dieser zentralen Konfiguration fest, welche Berechtigungen er welchen Benutzern oder auch welchen Webangeboten (virtuellen Hosts) zugestehen möchte. Nur dann, wenn ein Benutzer das Recht erhalten soll, die Vorgaben aus der zentralen Konfiguration zu überschreiben und individuell neu festzulegen, wird ihm die Nutzung von <var>.htaccess</var>-Dateien erlaubt. <var>.htaccess</var>-Dateien kann er dann in dem Verzeichnisbereich anlegen und bearbeiten, in dem sein Web-Angebot liegt. Dort, wo Sie Ihre HTML-Dateien, Grafikdateien usw. betreuen, können Sie also auch <var>.htaccess</var>-Dateien ablegen, falls Ihr Provider Ihnen diese Möglichkeit einräumt. Der Einsatz von <var>.htaccess</var> in Apache bedeutet, dass der Webserver bei jedem einzelnen Seitenzugriff vom angeforderten Dokument aus rekursiv sämtliche Verzeichnisse überprüfen muss, ob irgendwo eine solche Datei liegt. Und diese Information darf er nicht zwischenspeichern - denn die von <var>.htaccess</var>-Dateien konfigurierten Servereinstellungen sollen unmittelbar in demselben Moment gültig sein, in dem die <var>.htaccess</var>-Datei existiert, ohne Server-Neustart. Die Dezentralisierung der Konfiguration kostet also auch etwas Rechnerleistung.</p>

<p>Dass der Name <var>.htaccess</var> mit einem Punkt beginnt, ist eine Tradition aus der Unix-Welt. Dort beginnen viele verzeichnisspezifische Konfigurationsdateien mit einem Punkt, wodurch sie als "versteckt" gekennzeichnet werden. Bekannt ist beispielsweise die Datei <var>.profile</var>. Dateien, deren Name mit einem Punkt beginnt, werden von dem Unix-Konsolenbefehl "ls" nur aufgelistet, wenn mit der Option "-a" ausdrücklich angegeben wird, versteckte Dateien zu zeigen. Setzen Sie zur Verwaltung Ihres Webangebots einen grafischen FTP-Client ein, kann es Ihnen daher passieren, dass eine <var>.htaccess</var>-Datei, die Sie gerade hochgeladen haben, plötzlich nicht mehr zu existieren scheint. Und schließlich muss der Name auch nicht unbedingt <var>.htaccess</var> lauten, dieser Name hat sich lediglich als Konvention durchgesetzt. In der zentralen Konfiguration des Apache lässt sich auch ein beliebiger anderer Dateiname einstellen.</p>

<p><var>.htaccess</var>-Dateien sind reine Textdateien, die mit einem Texteditor bearbeitet werden können. Wenn Sie Telnet- oder SSH-Zugang zu demjenigen Server-Rechner haben, auf dem Ihr Web-Angebot liegt, können Sie solche Dateien direkt auf dem Server erstellen und bearbeiten, indem Sie dort einen geeigneten Texteditor aufrufen (auf Unix-Systemen z.B. den <var>vi</var>-Editor). Wenn Sie nur FTP-Zugang zu dem Server-Rechner haben, können Sie eine solche Datei auf Ihrem lokalen PC mit einem Texteditor erstellen und dann hochladen. Auf einem Windows-System dürfen Sie allerdings solche Dateinamen, die mit einem Punkt beginnen, nicht unmittelbar vergeben, da Windows den Punkt anders versteht. Sie müssen in Ihrem Texteditor die Option "Speichern unter" wählen und darauf achten, dass der Editor nicht selbständig aus diesem Namen den Dateinamen <var>.htaccess.txt</var> macht.</p>

<p><var>.htaccess</var>-Dateien gelten stets für das Verzeichnis, in dem sie abgespeichert werden, sowie für alle Unterverzeichnisse davon und für deren Unterverzeichnisse. Wenn Sie in einem der Unterverzeichnisse andere Regelungen wünschen, müssen Sie dort wiederum eine <var>.htaccess</var>-Datei ablegen. Die Angaben der jeweils aktuellen Datei überschreiben die Angaben von <var>.htaccess</var>-Dateien aus darüberliegenden Verzeichnissen.</p>

<p>Das Konzept, <var>.htaccess</var>-Dateien einzusetzen, gehörte zwar nahezu von Anfang an zum Apache, jedoch wurde die Zahl der erlaubten Anweisungen von Version zu Version größer, womit sich auch der Umfang dessen, was in einer <var>.htaccess</var>-Datei konfiguriert werden kann, beständig erweiterte. Sollte eines der hier genannten Beispiele bei Ihnen nicht funktionieren, so informieren Sie sich bitte über die Version des eingesetzten Webservers und schlagen Sie in der <img src="./SeHt01_files/de.gif" width="16" height="10" border="0" alt="deutschsprachige Seite">&nbsp;<a href="http://httpd.apache.org/docs/2.2/mod/quickreference.html">Apache-Dokumentation</a> nach, um herauszufinden, ob die Anweisung in Ihrer Apache-Version bereits eingesetzt werden kann.</p>

<p>Die Thematik ist wesentlich umfangreicher, als hier in einem kurzen Abriss dargestellt wird. Es können Ihnen nur die wichtigsten Einsatzgebiete benannt werden, für die <var>.htaccess</var>-Dateien genutzt werden können.</p>



<p class="doc"><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#top"><img src="./SeHt01_files/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#bottom"><img src="./SeHt01_files/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="erlaubte_anweisungen">Erlaubte Anweisungen in .htaccess-Dateien</a></h2>

<p>Sie können in einer <var>.htaccess</var>-Datei genau dieselben Anweisungen notieren, die in der zentralen Konfigurationsdatei Verwendung finden - mit nur wenigen Ausnahmen. Beispielsweise dürfen Sie keine zusätzlichen <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/apache.htm#module">Module</a> laden, den Servernamen nicht ändern und keinen zusätzlichen Speicherplatz (<code>DocumentRoot</code>) anfordern. Auch <code>&lt;Directory ...&gt;</code>-Container sind generell in so einer dezentralen Konfigurationsdatei ebensowenig zulässig wie Festlegungen für neue virtuelle Hosts. Wenn Sie solche Wünsche haben, so setzen Sie sich bitte mit Ihrem Provider bzw Webmaster in Verbindung - oder wenn Sie einen <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/allgemein.htm">lokal installierten Apache</a> nutzen, ändern Sie die <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/apache.htm#konfiguration">httpd.conf</a>. Sonst haben Sie aber sehr weitgehende Freiheiten. So ist es durchaus möglich, dass Sie Anweisungen nutzen, die in der zentralen Konfigurationsdatei nicht vorhanden sind, beispielsweise für Spracheinstellungen oder für ganz bestimmte Zeichensätze oder MIME-Typen. Prinzipiell dürfen Sie dies alles selbst konfigurieren. Denken Sie aber daran, dass es in jedem Verzeichnis nur eine einzige <var>.htaccess</var>-Datei geben kann, in der Sie alles das notieren müssen, was Sie konfigurieren wollen. Zur Strukturierung und damit besseren Lesbarkeit für Sie empfiehlt sich der sparsame Einsatz einiger weniger Kommentarzeilen.</p>

<p>Trotz dieser prinzipiell vielfältigen Möglichkeiten kann es aber teilweise drastische Einschränkungen geben. Welche Anweisungen Ihnen  tatsächlich zur Verfügung stehen, hängt davon ab, wie weitgehend die Rechte sind, die Ihnen der Server-Administrator mit Hilfe der Anweisung <code>AllowOverride</code> in der zentralen Konfigurationsdatei einräumt.</p>

<h3 class="inf">Beachten Sie:</h3>

<p>Die Anweisung <code>AllowOverride</code> kann <b>nicht</b> innerhalb einer <var>.htaccess</var> notiert werden, sondern wird ausschließlich vom Server-Administrator in der zentralen Konfigurationsdatei vorgegeben. Um den <code>AllowOverride</code>-Wert in Erfahrung zu bringen, benötigen Sie Einsicht in die Serverkonfiguration. Kontaktieren Sie dazu gegebenenfalls Ihren Webhosting-Provider. Dieser kann den Wert auch ändern, falls Sie bestimmte bisher nicht erlaubte Anweisungen verwenden möchten. Im einzelnen gibt es dafür folgende mögliche Werte:</p>

<ul>
<li>Mit <code>AllowOverride None</code> wird der Webserver angewiesen, <var>.htaccess</var>-Dateien zu ignorieren. Das ist im Übrigen die Voreinstellung.</li>
<li>Mit <code>AllowOverride All</code> wird festgelegt, dass in einer <var>.htaccess</var>-Datei (so gut wie) sämtliche zentrale Vorgaben überschrieben und damit abgeändert werden dürfen. Das kann bedeuten, dass Vorhaben, die eigentlich verboten sind (beispielsweise die Ausführung von CGI-Scripts), mit Hilfe einer <var>.htaccess</var>-Datei erlaubt werden. Als Server-Administrator werden Sie diese Anweisung also nur sehr vorsichtig einsetzen.</li>
<li>Mit <code>AllowOverride Options</code> wird festgelegt, dass in einer <var>.htaccess</var>-Datei <img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#optionen">Anweisungen zur Steuerung spezieller Verzeichniseigenschaften</a> zulässig sind.</li>
<li>Mit <code>AllowOverride Limit</code> wird festgelegt, dass in einer <var>.htaccess</var>-Datei <img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#verzeichnisschutz">Zugriffe von bestimmten Hosts erlaubt oder untersagt</a> werden können.</li>
<li>Mit <code>AllowOverride Indexes</code> wird festgelegt, dass in einer <var>.htaccess</var>-Datei <img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#browsing">Anweisungen zur Steuerung von Verzeichnisindizes</a> zulässig sind.</li>
<li>Mit <code>AllowOverride FileInfo</code> wird festgelegt, dass in einer <var>.htaccess</var>-Datei Anweisungen zur Akzeptanz bestimmter Dokumenttypen zulässig sind - beispielsweie, um <img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#fehlermeldungen">Individuelle Fehlermeldungen</a> ausgeben zu können.</li>
<li>Mit <code>AllowOverride AuthConfig</code> wird festgelegt, dass in einer <var>.htaccess</var>-Datei Autorisierungsanweisungen stehen dürfen - das betrifft beispielsweise Regelungen zum <img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#verzeichnisschutz">Passwortschutz</a>.</li>
</ul>

<p>Diese Werte können auch miteinander kombiniert werden. <code>All</code> ist der mächtigste Parameter, mit dem alles das zugelassen wird, was die anderen Parameter steuern.</p>



<p class="doc"><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#top"><img src="./SeHt01_files/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#bottom"><img src="./SeHt01_files/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="verzeichnisschutz">Verzeichnisse und Dateien mit Passwort schützen</a></h2>

<p><var>.htaccess</var>-Dateien sind verzeichnisspezifisch. Speichern Sie die <var>.htaccess</var>-Datei also in demjenigen Verzeichnis ab, in dem die zu schützenden Daten liegen. Sie können wahlweise das ganze Verzeichnis mit all seinen Unterverzeichnissen oder nur bestimmte Dateien oder Dateitypen schützen. Sie können den Passwortschutz außerdem wahlweise für einzelne Benutzer oder für ganze Benutzergruppen einrichten. Auch Kombinationen beider Formen sind möglich. Damit der Verzeichnisschutz mit Passwort funktioniert, genügt die <var>.htaccess</var>-Datei alleine allerdings nicht. Sie brauchen zusätzlich eine Datei, in der die Benutzernamen und die zugehörigen Passwörter stehen. Falls Sie mit Benutzergruppen arbeiten, benötigen Sie außerdem noch eine Datei, in der die Benutzergruppen definiert werden. Auch diese beiden anderen Dateien werden mit einem beliebigen Texteditor erstellt.</p>

<h3>Beispiel: <var>.htaccess</var>-Datei</h3>

<pre># .htaccess-Datei für Web-Verzeichnis /service
AuthType Basic
AuthName "Service-Bereich"
AuthUserFile /usr/verwaltung/web/.htusers
AuthGroupFile /usr/verwaltung/web/.htgroups
Require user  Werner Dieter Heidi
Require group Servicetechniker
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Die erste Zeile der Beispieldatei ist lediglich ein Kommentar. Solche Kommentarzeilen müssen mit dem Gatterzeichen <code>#</code> eingeleitet werden. Alle anderen Zeilen haben einen einheitlichen Aufbau: Sie beginnen mit Schlüsselwörtern (den eigentlichen Anweisungen), und dahinter folgen, durch ein oder mehrere Leerzeichen getrennt, Angaben dazu. Leerzeilen, die die Lesbarkeit verbessern, sind erlaubt, werden aber vom Webserver ignoriert. Zeilen mit Angaben, die der Webserver nicht interpretieren kann, führen jedoch grundsätzlich zu einem "Internal Server Error" (<img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/httpstatuscodes.htm">HTTP-Status-Code</a>&nbsp;<code>500</code>).</p>

<p>Um einen Passwortschutz einzurichten, brauchen Sie die Anweisungen <code>AuthType</code>, <code>AuthName</code>, <code>AuthUserFile</code>, und wenn Sie mit Benutzergruppen arbeiten, auch <code>AuthGroupFile</code>. Ferner benötigen Sie eine oder mehrere Angaben der Anweisung <code>Require</code>.</p>

<p>Mit <code>AuthType</code> wird die Art der Authentifizierung bezeichnet. Die meist gebrauchte Angabe ist <code>Basic</code> für die sogenannte <i>HTTP Basic Authentication</i> (einfache Authentifizierung über HTTP). Dabei stehen die Benutzernamen und die zugehörigen Passwörter in einer noch anzugebenden Datei. Diese Methode verlangt aber, dass das Passwort unverschlüsselt vom Browser an den Webserver übermittelt wird. Sie ist daher nicht wirklich sicher. Die Alternative für den Authentifizierungstyp ist <code>Digest</code>. Dabei werden Passwörter bereits in verschlüsselter Form abgefordert, allerdings beherrschen das nicht alle Browser. Sie müssen daher entscheiden, was für Sie Vorrang hat: höhere Sicherheit oder die Berücksichtigung der Browser und Clients, die nur die einfache Authentifizierung unterstützen.</p>

<p>Mit <code>AuthUserFile</code> wird die Datei angegeben, in der die Namen der autorisierten Benutzer und ihre Passwörter stehen. Es sollte der vollständige absolute Pfadname angegeben werden. Das ist also <b>nicht</b> der Pfad ab dem Wurzelverzeichnis Ihres Web-Projekts. Fragen Sie dazu gegebenenfalls Ihren Webhosting-Provider oder Webmaster. Sie können zwar auch eine Angabe machen, die relativ zum Wurzelverzeichnis des Webservers (das oft <var>/usr/lib/apache/</var> lautet) interpretiert wird. In der Regel ist das aber ein zentrales Installationsverzeichnis, auf das Sie keinen Zugriff haben.</p>

<p>Im Interesse der Sicherheit ist es günstiger, die Datei mit den Namen der Benutzer und ihren Passwörtern außerhalb des Web-Projekts auf dem Server abzulegen. Aber bei kaum einem Hosting-Angebot können Sie auf Systemverzeichnisse des Server-Rechners außerhalb des eigenen Web-Projekts zugreifen. Wenn nicht ausdrücklich vom Provider bzw. Webmaster anders bestimmt, sollten Sie außerdem für die Datei einen Namen wählen, der mit <var>.ht</var> beginnt, üblicherweise eben <var>.htusers</var> oder <var>.htpasswd</var>. In der Konfiguration des Apache-Servers sind solche Dateinamen als Grundeinstellung vorgegeben und werden, wie oben bereits erläutert, aufgrund des vorangestellten Punktes nicht zur Ansicht freigegeben, bleiben also vor Besuchern verborgen. Das Gleiche gilt für die Gruppendatei, falls Sie mit Benutzergruppen arbeiten. Diese wird mit <code>AuthGroupFile</code> angegeben. Alternativ können Sie aber mit Hilfe des Containers <code>&lt;Files&gt;</code> auch eigene Schutzregeln definieren und eigene Namen für diese Dateien vergeben.</p>

<p>Bei <code>Require</code> geben Sie als zweites Schlüsselwort entweder <code>user</code> oder <code>group</code> an, je nachdem, ob Sie Zugriffsbestimmungen für einzelne Benutzer oder Benutzergruppen festlegen möchten. Hinter diesem Schlüsselwort können ein oder mehrere Namen von Benutzern oder Benutzergruppen folgen. Alternativ können Sie auch das Schlüsselwort <code>valid-user</code> benutzen, um alle Benutzer zuzulassen, falls die Liste sonst zu lang werden würde.</p>

<p>Im obigen Beispiel werden die drei Benutzer <code>Werner Dieter Heidi</code> sowie alle Benutzer der Gruppe <code>Servicetechniker</code> angegeben. Damit der Passwortschutz funktioniert, müssen nun die angegebenen Dateien mit den Benutzernamen und (falls benötigt) den Gruppen angelegt werden.</p>

<h3>Beispiel: <var>.htusers</var>-Datei unter Unix</h3>

<pre># BenutzerDatei für Web-Projekt
Werner:INY8//m5KMwIc
Manfred:69gY8YPjQXeN6
Janine:INw2mPEH.owe2
Anke:INh6DHvyejvf2
Bernd:INboWuvjjwQ7E
Karin:INwOXOz96UQOU
Christina:INXo9kh0M.anc
Andreas:INeRD/cUQIFP6
Dieter:INUnlKdkNZ6RQ
Heidi:IN20ffIEEV1H6
</pre>

<h3>Beispiel: <var>.htusers</var>-Datei unter Windows</h3>

<pre># BenutzerDatei für Web-Projekt
Werner:Herakles
Manfred:Dionysos
Janine:Olympia
Anke:Hydra
Bernd:Poseidon
Karin:Hera
Christina:Athena
Andreas:Apollon
Dieter:Achilles
Heidi:Diana
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Auch in solchen Dateien sind Kommentarzeilen erlaubt, eingeleitet durch <code>#</code>. Ansonsten enthält jede Zeile der Benutzerdatei einen Benutzernamen, und gleich dahinter, durch einen Doppelpunkt getrennt, das Passwort. Der Apache-Webserver erlaubt entweder unverschlüsselte Passwörter (unter Windows), oder verschlüsselte nach den Methoden Crypt oder MD5 (alle Plattformen einschließlich Windows).</p>

<p>Falls Sie damit nichts anfangen können, können Sie das folgende kleine Formular verwenden. Geben Sie darin das gewünschte Passwort ein. Das Formular ruft beim Absenden ein CGI-Script im Web auf. Als Ergebnis erhalten Sie das nach der Methode Crypt verschlüsselte Passwort. Dazu muss jedoch eine Verbindung ins Internet bestehen.</p>

<form action="http://de.selfhtml.org/cgi-bin/cryptform.pl" method="get">
<table class="form" cellpadding="8" cellspacing="1"><tbody><tr>
<td align="right" valign="middle">Kennwort:</td>
<td align="right" valign="middle"><input type="password" name="password" size="14" maxlength="8"> <input type="submit" value="verschlüsseln"></td>
</tr></tbody></table>
</form>

<p>Zusammen mit dem Apache wird ein kleines Hilfsprogramm ausgeliefert, das die Erstellung solcher Passwortdateien vereinfacht. Es heißt <var>htpasswd</var> (unter Windows: <var>htpasswd.exe</var>) und ist über die Konsole (Eingabeaufforderung) zu bedienen. Rufen Sie es einfach mit dem Befehl <var>htpasswd -h</var> auf, um eine kurze Hilfe zu seiner Verwendung zu erhalten. Im einfachsten Fall geben Sie zum Beispiel</p>

<pre>htpasswd -c .htusers smuenz</pre>

<p>ein. Es wird eine neue Passwortdatei angelegt. Sie müssen für den neuen Benutzer "smuenz" ein Passwort angeben und bestätigen. Diese Passwortdatei können Sie dann in das vorgesehene Verzeichnis verschieben oder hochladen.</p>

<h3>Beispiel: <var>.htgroups</var>-Datei</h3>

<pre># GruppenDatei für Web-Projekt
Servicetechniker: Andreas Karin Janine
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Gruppendateien bestehen aus Einträgen, bei denen zunächst ein Gruppenname notiert wird und dahinter, nach einem Doppelpunkt, die Namen von Benutzern, die zu dieser Gruppe gehören. Es müssen Benutzernamen sein, für die in der Benutzerdatei ein Eintrag angelegt wurde.<br>
Die Gruppendatei wird im Beispiel nur benötigt, weil in der <var>.htaccess</var>-Datei eine Benutzergruppe angegeben wurde; die Gruppendatei wird ausschließlich dann erforderlich, wenn Sie Gruppennamen benutzen. In einem Intranet ist auch eine Benutzerdatei nicht zwingend erforderlich, da Sie Zugriffserlaubnisse und -verbote über die Zulassung bzw. den Ausschluss der internen IP-Adresse regeln können.</p>

<h3 class="inf">Effekt:</h3>

<p>Alle Besucher des Web-Projekts, die nun versuchen, auf das Verzeichnis mit der <var>.htaccess</var>-Datei zuzugreifen, bekommen von ihrem Browser einen Dialog angeboten, in dem sie Benutzernamen und Passwort eingeben müssen. Nur Besucher, die sich mit einer gültigen Kombination aus Benutzernamen und Passwort anmelden, haben Zugriff auf das Verzeichnis.</p>

<h3 class="inf"><a name="erweitert">Erweiterte Möglichkeiten:</a></h3>

<p>So wie im obigen Beispiel gezeigt, gilt der Zugangsschutz für das Verzeichnis, in dem die <var>.htaccess</var>-Datei liegt, und für alle Verzeichnisse unterhalb davon. Sie können den Schutz aber auch auf bestimmte Dateien, Dateitypen oder Zugriffsmethoden einschränken.</p>

<h3>Beispiel: <var>.htaccess</var>-Datei</h3>

<pre># .htaccess-Datei für Web-Verzeichnis /service

AuthType Basic
AuthName "Service-Bereich"
AuthUserFile /usr/verwaltung/web/.htusers
AuthGroupFile /usr/verwaltung/web/.htgroups

&lt;Files *.htm&gt;
Require user  Werner Dieter Heidi
Require group Servicetechniker
&lt;/Files&gt;
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Um den Schutz einzuschränken, benutzen Sie ähnlich wie in HTML oder XML Tags mit spitzen Klammern. Im einleitenden Tag kann hinter der öffnenden spitzen Klammer entweder <code>Files</code> stehen, wie im obigen Beispiel. Dahinter können Sie genau eine einschränkende Angabe machen. Mit <code>*.htm</code> wie im Beispiel beschränken Sie den Schutz auf HTML-Dateien. Mit einer Angabe wie <code>geheim.htm</code> würde nur diese eine Datei geschützt. Anstelle von <code>Files</code> können Sie auch <code>FilesMatch</code> einsetzen. Dann sind  Reguläre Ausdrücke möglich. Beispielsweise würden Sie mit <code>&lt;FilesMatch  "\.(htm|php)$"&gt;</code> alle HTML-Dokumente und alle PHP-Scripts erfassen.</p>

<p>Eine weitere Möglichkeit besteht darin, anstelle von <code>Files</code> die Anweisung <code>Limit</code>, oder besser noch <code>LimitExcept</code> anzuwenden. Diese Anweisung steht aber erst seit der Apache-Version 2.0.20 zur Verfügung. Sie hat Auswirkungen auf HTTP-Methoden wie  GET, POST, PUT, DELETE, CONNECT, OPTIONS usw. Mit <code>&lt;LimitExcept GET&gt;</code> können Sie für alle Zugriffsmethoden Bedingungen formulieren, mit Ausnahme von <code>GET</code> - und mit Mit <code>&lt;LimitExcept POST&gt;</code> würden Sie für alle Zugriffsmethoden mit Ausnahme von <code>POST</code> Zugriffsbedingungen formulieren können, falls der Webserver mindestens ein Apache 2.0.20 oder neuer ist.</p>

<h3 class="inf">Beachten Sie:</h3>

<p>Falls es bei Ihnen einfach nicht klappen will mit dem Schützen von Verzeichnissen, dann könnte der Grund darin liegen, dass in der zentralen Konfiguration des Apache Webservers beim Eintrag <code>AllowOverride</code> der Wert <code>None</code> gewählt wurde.</p>

<p>Schutzmechanismen, die Sie mit Hilfe von <var>.htaccess</var>-Dateien erstellen, sind auf HTTP-Ebene wesentlich sicherer als solche, die mit Hilfe von CGI-Scripts oder gar mit Hilfe von JavaScript erstellt werden. Dennoch sollten Sie beachten, dass <var>.htaccess</var> keinen Generalschutz bietet. Der Schutz gilt nur, wenn Web-Browser oder andere Web-Clients über den Webserver geschützte Daten anfordern. Er gilt nicht, wenn der Zugriff z.B. mit einem anderen Internet-Protokoll wie FTP erfolgt.</p>



<p class="doc"><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#top"><img src="./SeHt01_files/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#bottom"><img src="./SeHt01_files/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="ip_bereiche_namen">IP-Adressen, IP-Bereiche oder Namensadressen zulassen/ausschließen</a></h2>

<p>Sie können bestimmte IP-Adressen oder IP-Bereiche davon ausschließen, auf Webseiten zuzugreifen. Ebenso können Sie alle IP-Adressen ausschließen und nur ganz bestimmten den Zugriff erlauben. Anwender, die über eine nicht autorisierte IP-Adresse zugreifen, erhalten dann eine HTTP-Fehlermeldung (den <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/httpstatuscodes.htm">HTTP-Status-Code</a> <code>403</code>), und der Zugriff wird ihnen verweigert.</p>

<p>Sinnvoll ist das beispielsweise, wenn Ihr Web-Angebot nur den Mitarbeitern Ihrer Firma im firmeninternen Intranet zugänglich sein soll. In einem solchen Fall kennen Sie vermutlich die vorhandenen Netze, möglicherweise sogar alle im Intranet fest vergebenen IP-Adressen. Oder Sie möchten bestimmte Anwender, die mit festen IP-Adressen unterwegs sind, ausschließen.</p>

<h3>Beispiel: <var>.htaccess</var>-Datei</h3>

<pre># Datei zum Regeln von IP-Bereichen
Order deny,allow
Deny from .aol.com
Deny from 192.168
Allow from 192.168.220.102
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Zunächst legen Sie mit <code>Order</code> die logische Interpretationsreihenfolge der nachfolgenden Angaben fest. Möglich ist die Angabe <code>deny,allow</code> wie im Beispiel, oder auch die umgekehrte Reihenfolge.</p>

<p>In Zeilen, die mit <code>Deny from</code> oder <code>Allow from</code> beginnen, geben Sie eine konkrete IP-Adresse, einen Teil davon, eine Namensadresse oder einen Teil davon an. Mit <code>Deny from</code> verbieten Sie den Zugriff für den oder die angegebenen Benutzer, und mit <code>Allow from</code> erlauben Sie den Zugriff. Auch in der zentralen Konfigurationsdatei können für <var>&lt;Directory&gt;</var>-Container bereits solche Regelungen getroffen worden sein, die Sie dann in der <var>.htaccess</var>-Datei erweitern oder bei Bedarf korrigieren können. Im obigen Beispiel werden alle Benutzer ausgesperrt, die mit einer AOL-Kennung surfen, (<code>.aol.com</code>), sowie alle Benutzer mit einer numerischen IP-Adresse des Bereichs <code>192.168</code>. Das ist einer der "privaten" IP-Bereiche, also Ihr Intranet. Um aber einem bestimmten Benutzer aus diesem Bereich doch den Zugriff zu erlauben, wird im Beispiel anschließend noch mit <code>Allow from</code> dessen spezifische IP-Adresse angegeben.</p>

<p>Die Angabe wird einfach als Teilzeichenkette interpretiert. Wenn ein Client eine Webseite in dem Verzeichnis mit der <var>.htaccess</var>-Datei aufruft, vergleicht der Webserver, ob eine der notierten Zeichenketten in derjenigen Zeichenkette vorkommt, die der aufrufende Client dem Server übermittelt. Um mehr über die möglichen Zeichenketten zu erfahren, die in der Praxis übermittelt werden, empfiehlt sich ein Blick in die <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/projekt/kontrollieren.htm#logdateien">Log-Dateien</a> des Webservers.</p>

<h3 class="inf">Beachten Sie:</h3>

<p>Anstelle einer bestimmten Zeichenkette können Sie auch <code>Allow from all</code> bzw. <code>Deny from all</code> notieren, um eine generelle Erlaubnis oder ein generelles Verbot zu formulieren. Wenn Sie beispielsweise keinerlei Einschränkungen für nötig halten, geben Sie mit <code>Allow from all</code> Ihr Verzeichnis frei. Soll Ihr Webangebot dagegen lediglich Ihrem Firmennetz zur Verfügung stehen, so notieren Sie:</p>

<pre>Order deny,allow
Deny from all
Allow from 192.168
</pre>

<p>Beim Aussperren und Einschließen bestimmter IP-Adressen, IP-Bereiche oder Namensadressen sind die gleichen <img src="./SeHt01_files/up.gif" width="14" height="10" alt="nach oben"><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#erweitert">erweiterten Möglichkeiten</a> erlaubt wie beim Passwortschutz. Die Anweisungen mit <code>Deny from</code> und <code>Allow from</code> können dabei in entsprechende Tags eingeschlossen werden. So lässt sich z.B. das Aussperren bestimmter Benutzer oder Benutzerkreise auf bestimmte Dateien oder Zugriffsmethoden beschränken.</p>

<h3>Beispiel: <var>.htaccess</var>-Datei</h3>

<pre># .htaccess-Datei für Web-Verzeichnis /service
AuthType Basic
AuthName "Service-Bereich"
AuthUserFile /usr/verwaltung/web/.htusers
Require valid-user
Order deny,allow
Deny from all
Allow from 192.168
Satisfy any
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>In diesem Beispiel wird <code>Require</code> zusammen mit <code>Allow from</code> und <code>Deny from</code> verwendet. Die Anweisung <code>Satisfy</code> gibt an, welche der Bedingungen erfüllt sein müssen. Das Schlüsselwort <code>any</code> bedeutet, dass alle Benutzer mit einer numerischen IP im Bereich 192.168 automatisch zugelassen sind. Benutzer, die nicht von dort kommen, werden nach einem Benutzernamen und Passwort gefragt ("Oder"-Verknüpfung der beiden Bedingungen). Hingegen würde das Schlüsselwort <code>all</code> bedeuten, dass nur Benutzer mit einer IP aus dem Bereich 192.168 und einem gültigen Benutzernamen zugelassen sind ("Und"-Verknüpfung der beiden Bedingungen).</p>



<p class="doc"><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#top"><img src="./SeHt01_files/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#bottom"><img src="./SeHt01_files/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="optionen">Verzeichnis-Optionen einstellen</a></h2>

<p>Mit Hilfe einer <var>.htaccess</var>-Datei können Sie alle zentralen Verzeichnis-Optionen, die in der Konfiguration des Webservers eingestellt sind, für das entsprechende Verzeichnis und seine Unterverzeichnisse ändern. Voraussetzung ist allerdings, dass in der zentralen Webserver-Konfiguration mindestens <code>AllowOverride Options Indexes FileInfo</code> eingetragen ist. Wenn nicht, dann werden Angaben für andere Verzeichnis-Optionen in Ihrer <var>.htaccess</var>-Datei ignoriert.</p>

<h3>Beispiel: <var>.htaccess</var>-Datei</h3>

<pre># Datei für Verzeichnis /bilder
Options +ExecCGI -Indexes
DirectoryIndex erste.htm start.htm
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Mit <code>Options</code> können Sie verschiedene wichtige Grundeinstellungen ändern, die der Webserver für Verzeichnisse verwendet. Hinter <code>Options</code> können Sie eine oder mehrere der folgenden Angaben notieren:<br>
<code>All</code> erlaubt alles bis auf das Definieren alternativer Inhalte. Dies ist die Voreinstellung und gilt auch, wenn Sie nichts explizit angeben möchten.<br>
<code>+ExecCGI</code> erlaubt das Ausführen von <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/perl/sprache/cgitypisch.htm">CGI-Scripts</a> im Verzeichnis, falls es zentral nur im definierten CGI-Verzeichnis erlaubt ist, und <code>-ExecCGI</code> verhindert es, sofern es zentral in allen Verzeichnissen erlaubt ist.<br>
<code>+Includes</code> erlaubt das Ausführen von <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/ssi.htm">Server Side Includes</a> im Verzeichnis, falls es zentral verboten ist, und <code>-Includes</code> verhindert es, sofern es zentral erlaubt ist.<br>
<code>+IncludesNOEXEC</code> erlaubt das Ausführen von Server Side Includes, die kein CGI-Script ausführen, <code>-IncludesNOEXEC</code> verbietet solche Server Side Includes.<br>
<code>+Indexes</code> erlaubt Verzeichnis-Browsing, falls es zentral verboten ist, und <code>-Indexes</code> verhindert es, sofern es zentral erlaubt ist. Beim Verzeichnis-Browsing wird der Inhalt des Verzeichnisses im Browser aufgelistet, falls nur das Verzeichnis aufgerufen wird (z.B. <var>http://www.ihr-name.de/bilder/</var>) und dort keine Datei mit einem Namen zu finden ist, der "Index-Funktion" hat.<br>
<code>+MultiViews</code> erlaubt das Definieren <img src="./SeHt01_files/down.gif" width="14" height="10" alt="nach unten">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#alternative_inhalte">alternativer Inhalte</a>, <code>-MultiViews</code> schaltet es aus.</p>

<p>Im Normalfall ist der Webserver so konfiguriert, dass er das "Stöbern" im Verzeichnis zulässt, falls dort keine Datei mit "Index-Funktion" existiert. Das sind in der Einstellung der meisten Webserver Dateien mit Namen wie <var>index.htm</var> oder <var>index.html</var>.<br>
Mit <code>DirectoryIndex</code> können Sie andere Dateinamen bestimmen, die in diesem Verzeichnis und seinen Unterverzeichnissen als Dateien mit Index-Funktion gelten. Sie können beliebig viele Dateinamen angeben, welche dann in der Reihenfolge ihrer Angabe geprüft werden, falls mehrere von ihnen gleichzeitig im selben Verzeichnis existieren.</p>

<h3 class="inf">Beachten Sie:</h3>

<p>Sie müssen die Vorzeichen <var>-</var> und <var>+</var> nicht unbedingt angeben. Werden sie angegeben, so bewirken sie eine Korrektur eventuell in der zentralen Konfuguration vorhandener Einstellungen. Werden sie nicht angegeben, so werden eventuelle Voreinstellungen überschrieben.</p>


<p class="doc"><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#top"><img src="./SeHt01_files/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#bottom"><img src="./SeHt01_files/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="fehlermeldungen">Individuelle Fehlermeldungen gestalten</a></h2>

<p>Per Voreinstellung zeigt der Webserver eine in seiner Konfiguration festgelegte HTML-Datei oder eine hart kodierte Fehlermeldung an, wenn ein Zugriffsfehler passiert, z.B. wenn eine angeforderte Datei nicht existiert. Auch dies können Sie ändern.</p>

<p>Mit <code>ErrorDocument</code> definieren Sie eine eigene Meldung oder Datei, die im Fehlerfall angezeigt wird. Hinter dem Schlüsselwort notieren Sie den gewünschten <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/httpstatuscodes.htm">HTTP-Status-Code</a> - typische Fehler, die auftreten können, sind jene mit den Nummern <code>403</code>, <code>404</code> und <code>500</code>. Hinter der Nummer mit dem Status-Code können Sie entweder in Anführungszeichen eine eigene Fehlermeldung notieren, oder Sie geben die Adresse einer Webseite an, die im Fehlerfall angezeigt werden soll. Es gibt drei mögliche Varianten:</p>

<h3>1. hart kodierte Meldungen</h3>

<p>Das bedeutet, dass die Meldung direkt vom Webserver erzeugt wird. Der Wortlaut muss also auch vorgegeben werden, was in folgenden Formen geschehen kann:</p>

<h3>Beispiel 1: hartkodierte Fehlermeldung als reiner Text</h3>

<pre># Text für individuelle Fehleranzeige
ErrorDocument 404 "Ups. Was haben Sie denn da für Unsinn angestellt -\
                   die angeforderte Ressource gibts hier ja gar nicht ;-)"</pre>

<h3 class="inf">Beachten Sie:</h3>

<p>Zugegeben, der Text ist etwas frech, variieren Sie ihn bitte und wählen Sie eine höflichere Ausdrucksweise. Sie können einen beliebig langen Text notieren, aber es muss alles hintereinander ohne jeden Zeilenumbruch in einer einzigen Zeile geschrieben werden, oder es findet hier ausnahmsweise der Backslash als Zeilentrenner Verwendung, damit Sie es besser lesen können. Die Ausgabe an den Browser erfolgt als reiner Text. Der Internet Explorer stellt allerdings solche servergenerierte Fehlermeldungen erst dann dar, wenn sie mehr als 512 Bytes belegen. Das hier notierte Beispiel erscheint daher nicht im Internet Explorer (der stattdessen eine seiner Systemmeldungen offeriert), wohl aber in anderen Browsern. Sie können dieses Verhalten des Internet Explorer ändern, indem Sie in den "Internetoptionen" die als Voreinstellung aktivierte Option "Kurze HTTP-Fehlermeldungen anzeigen" deaktivieren.</p>

<h3>Beispiel 2: hart kodierte Fehlermeldung als HTML</h3>

<pre># HTML für individuelle Fehleranzeige
ErrorDocument 404 "&lt;html&gt;&lt;head&gt;&lt;title&gt;Seite nicht vorhanden&lt;/title&gt;\
                   &lt;style type='text/css'&gt;\
                   body {background-color:#EEEEEE;}\
                   h1,p,a {font-family:Helvetica,Arial,Sans-serif;}\
                   h1 {font-size:1.7em; margin-bottom:0em;}\
                   p {font-size:0.95em;}\
                   a {font-size:0.93em; text-decoration:none;}\
                   a:link,a:visited {color:#000080;}\
                   a:hover {color:#FF0000;}\
                   &lt;/style&gt;\
                   &lt;/head&gt;&lt;body&gt;\
                   &lt;h1&gt;Fehler 404&lt;/h1&gt;\
                   &lt;p&gt;Die angeforderte URL kann nicht gefunden werden.&lt;/p&gt;\
                   &lt;p&gt;Probieren Sie es bitte erneut mit einem Aufruf der\
                   &lt;a href='/'&gt;Startseite&lt;/a&gt;.&lt;/p&gt;\
                   &lt;/body&gt;&lt;/html&gt;"</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Wie Sie sehen, sind HTML-Tags in solchen Meldungstexten zulässig. Es muss wiederum entweder alles hintereinander in einer Zeile geschrieben werden, oder Sie setzen den Backslash als Zeilentrenner ein. Ihren Browser interessieren solche Backslashes hier nicht. Das angegebene Beispiel umfasst mit 769 Byte mehr als 512 Bytes, daher stellt es auch der Internet Explorer dar, egal, ob Sie in den "Internetoptionen" die als Voreinstellung aktivierte Option "Kurze HTTP-Fehlermeldungen anzeigen" deaktiviert haben oder nicht.</p>

<p>Sie können, wenn Sie es für unabdingbar halten, in solchen hart kodierten HTML-Anzeigen sogar CSS-Bereiche (wie im angegebenen Beispiel) und JavaScript vorgeben. Allerdings müssen Sie beachten, dass doppelte Anführungszeichen die Fehlermeldung begrenzen und Sie somit einfache Anführungszeichen für HTML-Attribute verwenden müssen.</p>

<h3>2. lokale Fehlerseiten</h3>

<p>Anstelle solcher hart kodierter Fehlermeldungen, die vom Server direkt ausgegeben werden, können Sie natürlich auch eigene HTML-Dateien für die Fehleranzeige einsetzen.</p>

<h3>Beispiel 3: lokales HTML-Dokument im aktuellen Verzeichnis</h3>

<p>Das bedeutet, dass ein lokales HTML-Dokument, das im selben Verzeichnis wie Ihre <var>.htaccess</var>-Datei liegt, die gewünschte Anzeige enthält. Dazu wird folgendes notiert:</p>

<pre># verzeichnisspezifisches HTML-Fehlerdokument
ErrorDocument 404 /verzeichnispfad/fehler404.htm</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Auch hier gilt, dass eine solche lokale Fehlerseite erst dann vom Internet Explorer dargestellt werden kann, wenn sie größer als 512 Bytes ist - es sei denn, Sie haben die Option für "Kurze HTTP-Fehlermeldungen anzeigen" deaktiviert. Bei dieser Art der Notation gilt die Anzeige nur für das gerade aktuelle Verzeichnis. Das kann nützlich sein, wenn Sie Ihr Webangebot so strukturiert haben, dass ein Verzeichnis nur Grafiken, ein weiteres nur Bilder und ein drittes nur Flash-Animationen enthält und Sie bei eventuellen Fehlern auch inhaltsbezogene Meldungen ausgeben möchten.</p>

<h3 class="inf">Beachten Sie:</h3>

<p>Sie müssen solche lokale Fehlerdokumente immer ausgehend vom Wurzelverzeichnis <var>/</var> deklarieren. Geben Sie lediglich<br>
<code>ErrorDocument 404 fehler404.htm</code><br>
an, interpretiert Apache das als String und übermittelt dem Browser lediglich "fehler404.htm" zur Anzeige - was sehr irritierend wirken kann.</p>

<h3>Beispiel 4: lokales HTML-Dokument im Wurzelverzeichnis</h3>

<pre># projektspezifisches HTML-Fehlerdokument
ErrorDocument 404 /fehler404.htm</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Wenn Sie das so notieren, brauchen Sie nur eine einzige Datei mit diesem Namen im Wurzelverzeichnis Ihres Webangebots. Das bedeutet aber auch, dass ihre Fehlerbeschreibung nicht variiert werden kann.</p>

<h3>3. externe Fehlerdokumente</h3>

<p>Das bedeutet, dass die gewünschte Fehlerseite über eine externe URL angesprochen wird. Der Eintrag erhält dann folgendes Aussehen:</p>

<h3>Beispiel 5: externes HTML-Dokument als Fehlerseite</h3>

<pre># externes HTML-Fehlerdokument
ErrorDocument 404 http://www.domainname.tld/fehler404.htm</pre>

<h3 class="inf">Beachten Sie:</h3>

<p>Mit dieser Weiterleitung auf ein externes Dokument wird ein Redirect ausgelöst, was zu eventuell nicht erwünschten Nebeneffekten führen kann. Näheres dazu kann in der <img src="./SeHt01_files/de.gif" width="16" height="10" border="0" alt="deutschsprachige Seite">&nbsp;<a href="http://httpd.apache.org/docs-2.2/mod/core.html#errordocument">Apache-Dokumentation</a> nachgelesen werden.</p>



<p class="doc"><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#top"><img src="./SeHt01_files/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#bottom"><img src="./SeHt01_files/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="browsing">Verzeichnis-Browsing einstellen</a></h2>

<p>Wenn Sie Verzeichnis-Browsing erlauben, sodass also bei einem Aufruf wie <var>http://www.ihr-name.de/bilder/</var> der Verzeichnisinhalt aufgelistet wird, können Sie die Optik beeinflussen, mit der die Verzeichnislisten im Browser angezeigt werden. Leichter verständlich wird das, wenn Sie sich klarmachen, dass der Webserver anhand des eingelesenen Verzeichnisinhaltes dynamisch HTML-Code generiert, den der Browser dann anzeigt. Mit den hier beschriebenen Optionen können Sie diese HTML-Ausgabe beeinflussen.</p>

<p>Die folgende Abbildung zeigt, wie ein Browser ein Verzeichnislisting anzeigen könnte, bei dem eigene Dateibeschreibungen und Symbolgrafiken zum Einsatz kommen:</p>

<p><img src="./SeHt01_files/verzeichnis.gif" width="627" height="304" alt="Beispiel einer Verzeichnisdarstellung"></p>

<h3>Beispiel: <var>.htaccess</var>-Datei</h3>

<pre># Datei für Verzeichnis /bilder
FancyIndexing On
AddDescription "HTML-Datei, anzeigbar" .htm .html
AddDescription "GIF-Grafik, anzeigbar" .gif
AddDescription "JPEG-Grafik, anzeigbar" .jpg
AddDescription "ZIP-Archiv, downloadbar" .zip
AddIcon /src/blau.gif html htm
AddIcon /src/gelb.gif gif jpg
AddIcon /src/gruen.gif ^^DIRECTORY^^
AddIcon /src/blau.gif ^^BLANKICON^^
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Mit <code>FancyIndexing On</code> schalten Sie eigene Optionen zur Darstellung des Verzeichnislistings ein. Die Einträge der übrigen Zeilen im obigen Beispiel definieren solche Anzeigeoptionen.</p>

<p>Mit <code>AddDescription</code> können Sie einen kurzen Beschreibungstext notieren, der hinter einer oder mehreren bestimmten Dateien stehen soll. Zuerst notieren Sie in Anführungszeichen den gewünschten Text, und dahinter geben Sie an, für welche Datei oder Dateien der Text gelten soll. Dabei können Sie wie im Beispiel oben Wildcards benutzen.</p>

<p>Mit <code>AddIcon</code> können Sie für eine oder mehrere bestimmte Dateien eine eigene Symbolgrafik bestimmen. Dabei geben Sie den URI der Symbolgrafik an. Bei Adressen auf der eigenen Domain können Sie mit absoluten Pfadnamen arbeiten, wobei das Wurzelverzeichnis des Web-Projekts der Ausgangspunkt ist. Hinter der Angabe zur gewünschten Grafikdatei können Sie eine oder mehrere Dateiendungen notieren. Dateien mit dieser Endung erhalten dann bei der Anzeige die entsprechende Symbolgrafik. Anstelle von Dateiendungen können Sie auch reservierte Ausdrücke wie <code>^^DIRECTORY^^</code> (Verzeichnisse erhalten diese Symbolgrafik) oder <code>^^BLANKICON^^</code> (Dateien ohne Dateiendung oder nicht zuzuordnende Dateien erhalten diese Symbolgrafik) notieren.</p>

<p>Weitere Optionen sind ebenfalls möglich, aber im obigen Beispiel nicht notiert:</p>

<p>Mit <code>AddType</code> können Sie einem <img src="./SeHt01_files/kap.gif" width="15" height="13" alt="Kapitel">&nbsp;<a href="http://de.selfhtml.org/diverses/mimetypen.htm">MIME-Typen</a> eine oder mehrere Dateiendungen zuordnen.<br>
Mit <code>AddType text/xml adr</code> ordnen Sie beispielsweise Dateien mit <code>*.adr</code> dem MIME-Typ <code>text/xml</code> zu.<br>
Mit <code>AddEncoding</code> können Sie dem Sub-Typ eines MIME-Typen eine oder mehrere Dateiendungen zuordnen.<br>
Mit <code>AddEncoding javascript jscr</code> ordnen Sie beispielsweise Dateien mit <code>*.jscr</code> dem MIME-Typ <code>text/javascript</code>  zu.</p>

<p>Mit <code>AddIconByType</code> können Sie einem MIME-Typen eine Symbolgrafik zuordnen. Alle Dateien dieses MIME-Typs werden dann mit dieser Symbolgrafik angezeigt.<br>
Mit <code>AddIconByType text/xml /src/struktur.gif</code> ordnen Sie beispielsweise Dateien mit dem MIME-Typ <code>text/xml</code> eine Grafik mit der Adresse <code>/src/struktur.gif</code> zu.<br>
Mit <code>AddIconByEncoding</code> können Sie dem Sub-Typ eines MIME-Typen eine Symbolgrafik zuordnen.<br>
Mit <code>AddIconByEncoding javascript /src/action.gif</code> ordnen Sie beispielsweise Dateien mit dem MIME-Subtyp <code>javascript</code> eine Grafik mit der Adresse <code>/src/action.gif</code> zu.</p>

<p>Mit <code>DefaultIcon</code> bestimmen Sie eine Symbolgrafik für alle Fälle, die nicht durch speziellere Angaben abgedeckt sind.<br>
Mit <code>DefaultIcon /src/punkt.gif</code> bestimmen Sie beispielsweise, dass alle Verzeichniseinträge, die sich nicht anderweitig zu Symbolgrafiken zuordnen lassen, die Grafik mit der Adresse <code>/src/punkt.gif</code> erhalten.</p>

<p>Mit <code>HeaderName</code> bestimmen Sie eine eigene Datei für die Anzeige der Kopfinformation zum Verzeichnis.<br>
Mit <code>HeaderName kopf.htm</code> bestimmen Sie beispielsweise, dass die Anzeige der Kopfinformationen aus der Datei <code>kopf.htm</code> im gleichen Verzeichnis geholt werden.</p>

<p>Mit <code>ReadmeName</code> bestimmen Sie eine Datei, in der zusätzliche Informationen zum Verzeichnis stehen, z.B. Copyright-Hinweise. Diese Datei wird unterhalb der Verzeichnisliste eingebunden.<br>
Mit <code>ReadmeName fuss.htm</code> bestimmen Sie beispielsweise, dass die Anzeige der "Liesmich"-Informationen aus der Datei <code>fuss.htm</code> im gleichen Verzeichnis geholt wird.</p>

<p>Mit <code>AddAlt</code> können Sie einer verwendeten Symbolgrafik einen <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/html/grafiken/einbinden.htm#referenz">HTML-Alternativtext</a> zuordnen, falls die Grafik nicht angezeigt werden kann.<br>
Mit <code>AddAlt "das ist eine Grafikdatei" gelb.gif</code> bestimmen Sie beispielsweise den Alternativtext <code>das ist eine Grafikdatei</code> für die Symbolgrafik <code>gelb.gif</code>.<br>
Mit <code>AddAltByType</code> können Sie allen Symbolgrafiken vor Dateien eines bestimmten MIME-Typs einen gemeinsamen HTML-Alternativtext zuordnen.<br>
Mit <code>AddAltByType "Das ist eine XML-basierte Datei" text/xml</code> ordnen Sie beispielsweise allen Symbolgrafiken, die vor einer Datei mit dem MIME-Typ <code>text/xml</code> stehen, den angegebenen Alternativtext zu.<br>
Mit <code>AddAltByEncoding</code> können Sie allen Symbolgrafiken vor Dateien eines bestimmten MIME-Subtyps einen gemeinsamen HTML-Alternativtext zuordnen.<br>
Mit <code>AddAltByEncoding "Das ist eine XML-basierte Datei" javascript</code> ordnen Sie beispielsweise allen Symbolgrafiken, die vor einer Datei mit dem MIME-Subtyp <code>javascript</code> stehen, den angegebenen Alternativtext zu.</p>

<p>Mit <code>DirectoryIndex</code> können Sie festlegen, welche Dateinamen Index-Funktion erhalten, das heißt, welche Datei ausgeliefert wird, wenn der Client eine URL in der Form <code>http://www.domainname/</code> ohne Angabe eines speziellen Dateinamens anfordert. Sie können mehrere Dateinamen angeben, die entsprechend ihrer Reihenfolge vom Server gesucht werden. Die Datei mit dem ersten Namen aus dieser Auflistung, die dann auch im durchsuchten Verzeichnis gefunden wird, liefert der Server aus.</p>

<p>Mit <code>IndexIgnore</code> können Sie Dateien angeben, die nicht im Verzeichnislisting auftauchen sollen.<br>
Mit <code>IndexIgnore kopf.htm fuss.htm nacktbild.jpg *.bmp</code> bestimmen Sie beispielsweise, dass die Dateien <code>kopf.htm</code>, <code>fuss.htm</code>, <code>nacktbild.jpg</code> sowie alle Dateien mit der Endung <code>.bmp</code> nicht angezeigt werden.</p>

<p>Mit <code>IndexOrderDefault</code> wird die Sortierung bestimmt. Per Voreinstellung werden die Verzeichniseinträge alphabetisch aufsteigend nach Dateinamen angezeigt.<br>
Mit <code>IndexOrderDefault Descending Name</code> können Sie beispielsweise nach Dateinamen absteigend sortieren,<br>
mit <code>IndexOrderDefault Ascending Date</code> aufsteigend nach Zeitstempel,<br>
mit <code>IndexOrderDefault Descending Size</code> absteigend nach Dateigröße<br>
und mit <code>IndexOrderDefault Ascending Description</code> aufsteigend nach Dateikurzbeschreibung.</p>

<p>Mit <code>IndexOptions</code> können Sie schließlich weitere Einzeloptionen festlegen.<br>
Mit <code>IndexOptions IconHeight=12 IconWidth=14 IconsAreLinks ScanHTMLTitles</code> legen Sie beispielsweise fest, dass Icongrafiken in der fixen Höhe von 12 Pixeln und der fixen Breite von 14 Pixeln angezeigt werden. Die Icons sind außerdem als Links anklickbar und rufen die dahinter angezeigte Datei oder das Verzeichnis auf. In der Spalte für Dateibeschreibungen werden im Fall von HTML-Dateien die Inhalte der darin definierten <code>title</code>-Elemente ausgelesen und als Kurzbeschreibung zur Datei angezeigt.<br>
Weitere Optionen sind:<br>
Mit <code>SuppressColumnSorting</code> werden die Verzeichniseinträge unsortiert angezeigt.<br>
Mit <code>SuppressDescription</code> werden keine Kurzbeschreibungen anzeigt.<br>
Mit <code>SuppressLastModified</code> werden keine Zeitstempel bei den Einträgen angezeigt.<br>
Mit <code>SuppressSize</code> werden keine Dateigrößen angezeigt.</p>



<p class="doc"><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#top"><img src="./SeHt01_files/up.gif" width="14" height="10" border="0" alt="nach oben"></a><a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#bottom"><img src="./SeHt01_files/down.gif" width="14" height="10" border="0" alt="nach unten"></a></p>



<h2><a class="an" name="alternative_inhalte">Alternative Inhalte senden</a></h2>

<p>Jedesmal, wenn Sie irgendeine URL anfordern, findet, von Ihnen unbemerkt, zunächst ein Dialog zwischen Ihrem Browser (dem Client) und dem Webserver statt. Bereits mit Ihrer Anforderung übermitteln Sie einige Daten. Dazu gehören Informationen darüber, was Ihr Client bevorzugt, also beispielsweise, welche Sprache und welchen Zeichensatz er am besten versteht und einiges andere mehr. Server und Client führen gewissermaßen erst einmal ein Gespräch darüber, was denn der Server tatsächlich schicken soll. Diese Verhandlung wird in der Regel vom Server geführt. Bedingungen, wie das geschehen kann, sind in der Spezifikation des zugrundeliegenden Protokolls HTTP (<img src="./SeHt01_files/en.gif" width="16" height="10" alt="englischsprachige Seite">&nbsp;<a target="_top" href="http://www.w3.org/Protocols/rfc2616/rfc2616.html">rfc2616</a>) festgelegt. Beispielsweise kann der Server eine deutschsprachige oder eine englischsprachige Index-Seite senden, je nachdem, ob der Anwender einen Browser mit deutschsprachiger oder englischsprachiger Bedienoberfläche benutzt. Oder er kann alternativ eine HTML-Datei oder eine WML-Datei senden, abhängig davon, ob der aufrufende Client ein normaler Web-Client ist oder ein Handy, das WAP/WML-basierte Inhalte haben möchte.</p>

<p>Sie haben nun die Möglichkeit, in einer <var>.htaccess</var>-Datei die Bedingungen festzulegen, auf welche Art der Server die Verhandlung führen soll. Dafür gibt es mehrere Konzepte. Der etwas einfachere und weniger komplexe Weg besteht lediglich aus zwei Schritten. Als Beispiel soll der Server entscheiden, ob er eine englischsprachige oder eine deutschsprachige Index-Seite liefert:</p>

<ol>
<li>Sie erstellen in Ihrem Verzeichnis die beiden als Alternativen gedachten Seiten <var>index.htm.de</var> und <var>index.htm.en</var></li>
<li>Sie fügen in Ihrer <var>.htaccess</var>-Datei eine Zeile <code>Options MultiViews</code> ein</li>
</ol>

<p>Das ist bereits alles. An einen Client mit deutschsprachiger Benutzerführung wird der Server nun die Seite <var>index.htm.de</var> ausliefern, an einen Client mit englischsprachiger Benutzerführung die Seite <var>index.htm.en</var>, sobald überhaupt eine <var>index.htm</var> angefordert wird.</p>

<h3>Beispiel 1: <var>.htaccess</var>-Datei</h3>

<pre># Einstellungen für alternative Inhalte
Options MultiViews FollowSymLinks IncludesNoExec
AddOutputFilter INCLUDES .shtml .shtm
Order allow,deny
Allow from all
</pre>

<h3>Beispieldatei <var>index.htm.de</var></h3>

<pre>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;html&gt;
&lt;head&gt;&lt;title&gt;Franz Mustermanns Homepage&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Willkommen bei Franz Mustermann&lt;/h1&gt;
&lt;h3&gt;Freuen Sie sich auf folgendes:&lt;/h3&gt;
&lt;!-- weitere Inhalte --&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<h3>Beispieldatei <var>index.htm.en</var></h3>

<pre>&lt;!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"&gt;
&lt;html&gt;
&lt;head&gt;&lt;title&gt;Homepage of Franz Mustermann&lt;/title&gt;&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Welcome to Franz Mustermann&lt;/h1&gt;
&lt;h3&gt;Enjoy the following:&lt;/h3&gt;
&lt;!-- weitere Inhalte --&gt;
&lt;/body&gt;
&lt;/html&gt;
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>Mit <code>Options MultiViews</code> wird der Server angewiesen, unter alternativen Inhalten denjenigen auszuwählen, der am besten den Bedingungen des anfragenden Clients entspricht. Zugleich wird hier im Beispiel dafür gesorgt, dass eventuellen symbolischen Links im Verzeichnis gefolgt werden darf und dass <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a target="_top" href="http://de.selfhtml.org/servercgi/server/ssi.htm">SSI</a> zulässig sind, sofern sie keine Scripts aufrufen. <code>AddOutputFilter</code> legt fest, dass nur Dateien mit den Endungen <code>shtml</code> und <code>shtm</code> SSI-Anweisungen enthalten dürfen und schließlich wird noch bestimmt, dass das Verzeichnis von allen Benutzern oder Besuchern eingesehen werden darf.</p>

<h3 class="inf">Beachten Sie:</h3>

<p>Eine Besonderheit bei der Auslieferung alternativer Daten besteht darin, dass der Client eine Ressource mit dem Namen <var>index.htm</var> anfordert (und der Benutzer also keine Sprachkennung selbst angeben muss), der Server aber die Datei auswählt, die zusätzlich die sprachspezifische Kennung im Namen trägt. Sie als Benutzer bemerken gar nichts davon, dass eine Auswahl getroffen wurde, und Sie bemerken auch nichts davon, dass die angeforderte URL zu einer Datei passt, die auf dem Server einen um ein Teilstück erweiterten Namen trägt.</p>

<p><code>Options MultiViews</code> bewirkt, dass sich der Server selbst aus einigen Angaben der zentralen Konfiguration eine Art von "Verteilerliste" erstellt, in der alle zulässigen Alternativen aufgeführt sind. Anhand der vom Client mitgelieferten Daten (Referer, User-Agent-Header usw.) wird dann verglichen, welche darin enthaltene Anweisung am besten der Anforderung des Clients entspricht. Die Voraussetzung für die im Beispiel verwendeten Kennungen "en" und "de" ist allerdings, daß der Server selbst solche Länderkennungen unterscheiden kann. Sollte es bei Ihnen nicht gleich funktionieren, dass tatsächlich unterschiedliche Inhalte ausgeliefert werden, so versuchen Sie bitte, Ihre <code>.htaccess</code>-Datei um folgende Zeilen zu erweitern:</p>

<pre>AddLanguage de .de
AddLanguage en .en</pre>

<p>Sie können auch einen etwas komplexeren Ansatz verfolgen, indem Sie die Zusammenstellung der "Verteilerliste" selbst übernehmen, das also nicht dem Server überlassen. Dafür gibt es wiederum mehrere unterschiedliche Möglichkeiten, wobei leicht zu verstehen sein wird, dass Sie dann die Option <code>MultiViews</code> nicht einsetzen dürfen.</p>

<h3>Beispiel 2: <var>.htaccess</var>-Datei</h3>

<pre># Einstellungen für alternative Inhalte mit Apache 2.x
AddHandler type-map .var

# Ältere Apache-Versionen verstehen "AddHandler" nicht und
# benötigen eine andere Angabe:
# AddType application/x-type-map var

DirectoryIndex index

# besser: DirectoryIndex index.var
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>In der <var>.htaccess</var> stehen folgende Einträge:<br>
<code>AddHandler type-map .var</code> (bzw. in älteren Apache-Versionen <code>AddType application/x-type-map var</code>) fügt einen <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/diverses/mimetypen.htm">MIME-Typ</a> hinzu, den der Webserver (zumindest Apache) kennt. Es ist der MIME-Typ für Dateien mit Angaben zu alternativen Inhalten. Als Dateiendung für solche Dateien wird im Beispiel <code>var</code> definiert. Dateien <var>*.var</var> werden dann als Anweisungsdateien für alternative Inhalte angesehen.<br>
<code>DirectoryIndex index</code> bestimmt Dateien, in deren Namen <code>index</code> vorkommt, als Dateien für die Index-Funktion. Gehen Sie damit aber vorsichtig um: wenn es in Ihrem Verzeichnis mehrere Dateien mit diesem Namen gibt (beispielsweise <code>index.htm</code> und <code>index.php</code> sowie so eine <code>index.var</code>), kann sich der Server möglicherweise nicht entscheiden, welche er ausliefern bzw. nutzen soll und bietet Ihnen als Ausweichlösung ein Listing an. Gerade das wollen Sie aber meist vermeiden. Es ist daher günstiger, einen vollständigen Dateinamen anzugeben, beispielsweise <code>index.var</code>. Sie benötigen nun noch eine Datei mit diesem Namen im gleichen Verzeichnis wie Ihre <var>.htaccess</var>-Datei:</p>

<h3>Beispieldatei <var>index.var</var></h3>

<pre>URI: index; vary="type,language"

URI: deutsch.htm
Content-type: text/html; qs=1.0
Content-language: de

URI: english.htm
Content-type: text/html; qs=0.8
Content-language: en
</pre>

<p>Mit <code>URI: index; vary="type,language"</code> drücken Sie aus, dass die folgenden Definitionen für alternativen Inhalt dann berücksichtigt werden sollen, wenn Anfragen kommen, die auf den festgelegten <code>DirectoryIndex</code> (im Beispiel zuvor als <code>index</code> definiert) zutreffen. Die Alternativen können Angaben zum Dateityp (<code>type</code>) und zur Sprache (<code>language</code>) betreffen.</p>

<p>Diese erste Anweisung und die möglichen Alternativen müssen jeweils durch eine Leerzeile getrennt werden. Jede Alternative beginnt mit <code>URI:</code>. Dahinter folgt der gewünschte URI, der bei der jeweiligen Alternative aufgerufen werden soll. Im obigen Beispiel handelt es sich jeweils um Dateien im gleichen Verzeichnis, nämlich einmal <code>english.htm</code> und einmal <code>deutsch.htm</code>.<br>
Mit <code>Content-type:</code> bestimmen Sie den MIME-Typ des bei <code>URI:</code> angegebenen URIs, im obigen Beispiel <code>text/html</code>. Falls Sie z.B. alternative Inhalte für Web-Browser und WAP-Handys senden wollen, können Sie bei dieser Angabe in der einen Alternative beispielsweise eine WML-Datei anbieten mit dem MIME-Typ <code>text/vnd.wap.wml</code>, und in der anderen eine HTML-Datei mit dem üblichen MIME-Typ <code>text/html</code>. Die Angabe <code>Content-type:</code> ist in jedem Fall Pflicht, auch dann, wenn Sie dort keine unterschiedliche Angaben zu machen haben.<br>
Bei <code>Content-type</code> können Sie am Ende, durch Semikolon getrennt, noch eine Angabe zu <code>qs</code> notieren. Hinter diesem Schlüsselwort und einem Gleichheitszeichen können Sie numerische Werte für die Alternativen vergeben. Alternativen mit höheren Werten werden in dem Fall, dass sonst nicht entscheidbar ist, welche Alternative gewählt werden soll, bevorzugt.<br>
Mit <code>Content-language:</code> können Sie Sprachen unterscheiden, indem Sie ein <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/diverses/sprachenlaenderkuerzel.htm">Sprachenkürzel</a> angeben. Abhängig davon, welche Sprache der aufrufende Client benutzt oder bevorzugt, wird die entsprechende Alternative ausgewählt.</p>

<p>Für alternative Inhalte benötigen Sie natürlich auch alternative Dateien. In diesem Beispiel wären das die Dateien <var>english.htm</var> und <var>deutsch.htm</var>, die den gleichen Inhalt haben, nur in verschiedenen Sprachen - ähnlich den weiter oben vorgestellten Beispielen für eine <var>index.htm.de</var> und eine <var>index.htm.en</var>.</p>

<h3>Beispiel 3: <var>.htaccess</var>-Datei</h3>

<pre># Einstellungen für alternative Inhalte mit Apache 2.x
Options -MultiViews
DirectoryIndex index.html
&lt;Files *.html&gt;
  SetHandler type-map
&lt;/Files&gt;
</pre>

<h3 class="xpl">Erläuterung:</h3>

<p>In der <var>.htaccess</var> stehen diesmal folgende Einträge:<br>
<code>Options -MultiViews</code> ist eine Vorsichtsmaßnahme. Diese Eintragung bedeutet, dass <code>MultiViews</code> explizit ausgeschaltet wird, falls es zentral erlaubt sein sollte. Ist in der zentralen Konfiguration kein <code>MultiViews</code> vorgesehen, bewirkt diese Angabe gar nichts.<br>
<code>DirectoryIndex index.html</code> bewirkt, dass eine Datei mit diesem Namen die Index-Funktion erhält.<br>
Mit dem Container <code>&lt;Files *.html&gt;</code> bestimmen Sie, dass die darin enthaltene Anweisung <code>SetHandler type-map</code> nur für Dateien gilt, deren Name die Erweiterung <code>html</code> aufweist. Solche Dateien, deren MIME-Typ in diesem Fall bereits bekannt ist und also nicht gesondert festgelegt werden muss, erhalten die Funktion einer type-map zugewiesen und ihr Inhalt wird grundsätzlich so behandelt, als stelle er eine solche map dar. Das hat zur Folge, dass Ihre <code>index.html</code> hier <b>nicht</b> den sonst vorzusehenden HTML-Code enthalten darf (übrigens auch keine andere *.html-Datei), sondern denselben Inhalt aufweisen muss, den Sie auch einer im zweiten Beispiel bestimmten <code>index.var</code> mitgeben würden. Die Wirksamkeit solcher Festlegungen können Sie überprüfen, wenn Sie sich die <img src="./SeHt01_files/en.gif" width="16" height="10" border="0" alt="englischsprachige Seite"> / <img src="./SeHt01_files/de.gif" width="16" height="10" border="0" alt="deutschsprachige Seite">&nbsp;<a href="http://httpd.apache.org/docs/2.2/">Apache-Dokumentation</a> mit unterschiedlich konfigurierten Browsern anschauen - für die Ausgabe alternativer Inhalte werden von der Apache Foundation für die online-Dokumentation genau solche Einstellungen genutzt.</p>

<h3>Beispieldatei <var>index.html</var></h3>

<pre>URI: index; vary="type,language"

URI: index.php
Content-type: text/html; qs=1.0
Content-language: de

URI: english.htm
Content-type: text/html; qs=0.8
Content-language: en
</pre>

<p>Sie sehen, dass es sich um dieselben Angaben wie bei einer weiter oben dargestellten <code>index.var</code> handelt, und nicht um den normalen HTML-Code.</p>

<p>Wenn Sie eine solche <var>.htaccess</var> und <var>index.var</var> oder <var>index.html</var> ins Startverzeichnis einer Domain legen, z.B. ins Startverzeichnis von <var>http://www.ihr-name.de/</var>, dann werden Besucher, die nur die Domain aufrufen (ohne bestimmte Dateinamen) automatisch auf die softwareseitig erkennbare Landessprachenseite geleitet. Von dort aus können entsprechend unterschiedliche Verlinkungen so durch das restliche Angebot führen, dass die Landessprache die gleiche bleibt. Gehen Sie mit dieser Möglichkeit der Lenkung jedoch bedächtig um. Bedenken Sie, dass nicht jeder Besucher Ihres Web-Projekts frei in der Wahl seines Browsers ist. Ein deutschsprachiger Besucher in einem englischen Internetcafé hat auch bei besuchten spanischen Seiten eigene Vorstellungen bei der Wahl der Sprache. Sehen Sie gegebenenfalls eine clientseitige Auswahl der Sprache vor.</p>



<table cellpadding="4" cellspacing="0" border="0" width="100%">
<tbody><tr><td colspan="2" class="doc">
&nbsp;<a href="http://de.selfhtml.org/servercgi/server/htaccess.htm#top"><img src="./SeHt01_files/up.gif" width="14" height="10" border="0" alt="nach oben"></a>
</td></tr>
<tr><td class="doc"><a href="http://de.selfhtml.org/servercgi/server/rewrite.htm"><img src="./SeHt01_files/next.gif" width="10" height="10" border="0" hspace="10" alt="weiter"></a></td>
<td width="100%"><img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/rewrite.htm">Umleitungen mit mod_rewrite</a>
</td></tr>
<tr>
<td class="doc"><a href="http://de.selfhtml.org/servercgi/server/ssi.htm"><img src="./SeHt01_files/prev.gif" width="10" height="10" border="0" hspace="10" alt="zurück"></a></td>
<td><img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/ssi.htm">SSI - Server Side Includes</a>
</td>
</tr>
<tr><td colspan="2" class="doc">&nbsp;</td>
</tr>
<tr>
<td colspan="2" class="nav"><a class="an" name="bottom"><img src="./SeHt01_files/refkap.gif" width="16" height="13" alt="Teil von"></a> <a href="http://de.selfhtml.org/index.htm">SELFHTML</a>/<a href="http://de.selfhtml.org/navigation/index.htm" target="_parent" class="navh">Navigationshilfen</a> <img src="./SeHt01_files/refkap.gif" width="16" height="13" alt="Teil von">&nbsp;<a href="http://de.selfhtml.org/servercgi/index.htm">Webserver/CGI</a> <img src="./SeHt01_files/refkap.gif" width="16" height="13" alt="Teil von">&nbsp;<a href="http://de.selfhtml.org/servercgi/server/index.htm">Webserver</a></td>
</tr>
</tbody></table>

<p>© 2007 <img src="./SeHt01_files/dok.gif" width="15" height="10" alt="Seite">&nbsp;<a href="http://de.selfhtml.org/editorial/impressum.htm">Impressum</a> <a href="http://flattr.com/thing/41584/SELFHTML" target="_blank"><img src="./SeHt01_files/flattr-100x17.png" alt="Flattr this" title="Flattr this" border="0"></a></p>



<script type="text/javascript" src="chrome-extension://bmdblncegkenkacieihfhpjfppoconhi/in-page-script.js"></script></body></html>